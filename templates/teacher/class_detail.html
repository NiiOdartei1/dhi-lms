<!-- ===================================================================== -->
<!-- TEACHER: CLASS DETAILS (Course Registration) - Tertiary Version -->
<!-- ===================================================================== -->

{% extends 'teacher/base_teacher.html' %}
{% block title %}Course Details{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2 class="mb-3">Course: {{ course.name }}</h2>
    <div class="row mb-3">
        <div class="col-md-6">
            <p><strong>Code:</strong> {{ course.code }}</p>
            <p><strong>Programme:</strong> {{ course.programme_name }}</p>
            <p><strong>Level:</strong> Level {{ course.programme_level }}</p>
        </div>
        <div class="col-md-6">
            <p><strong>Semester:</strong> {{ course.semester }} | <strong>Academic Year:</strong> {{ course.academic_year|start_year }}</p>
            <p><strong>Credit Hours:</strong> {{ course.credit_hours }}</p>
            <p><strong>Mandatory:</strong> {% if course.is_mandatory %}<span class="badge bg-success">Yes</span>{% else %}<span class="badge bg-secondary">No</span>{% endif %}</p>
        </div>
    </div>

    <hr>

    <h5>Registered Students ({{ registrations|length }})</h5>

    {% if registrations %}
    <table class="table table-bordered table-hover mt-3">
        <thead class="table-light">
            <tr>
                <th>#</th>
                <th>Student Name</th>
                <th>Student ID</th>
                <th>Index Number</th>
                <th>Programme</th>
            </tr>
        </thead>
        <tbody>
            {% for reg in registrations %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>{{ reg.student.full_name }}</td>
                <td>{{ reg.student.user_id }}</td>
                <td>{{ reg.student.student_profile.index_number if reg.student.student_profile else '—' }}</td>
                <td>{{ reg.student.student_profile.current_programme if reg.student.student_profile else '—' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No students registered for this course yet.</p>
    {% endif %}

    <a href="{{ url_for('teacher.classes') }}" class="btn btn-secondary mt-4">← Back to Courses</a>
</div>
{% endblock %}
